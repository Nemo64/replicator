{
    "$schema": "http://json-schema.org/draft-07/schema#",

    "type": "object",
    "required": ["sources", "views"],
    "properties": {
        "sources": {
            "type": "object",
            "additionalProperties": false,
            "patternProperties": {
                "^[A-Za-z_][A-Za-z0-9_]{0,31}$": {"$ref": "#/definitions/driver"}
            }
        },
        "views": {
            "type": "array",
            "items": {
                "type": "object",
                "required": ["source", "target", "format"],
                "properties": {
                    "source": {"type": "string", "pattern": "^[A-Za-z_][A-Za-z0-9_]{0,31}$"},
                    "matrix": {"type": "object"},
                    "target": {"$ref": "#/definitions/driver"},
                    "format": {"anyOf": [{"type": "string"}, {"type": "object"}]}
                }
            }
        }
    },

    "definitions": {
        "driver": {
            "type": "object",
            "required": ["type"],
            "properties": {
                "driver": {"type": "string", "pattern": "^([a-zA-Z][^:]*):(.+)$", "examples": ["replicator:filesystem"]},
                "path": {"type": "string"},
                "schema": {"type": "string"},
                "format": {"type": "string", "examples": ["json", "csv"]},
                "compression": {"type": "string", "examples": ["none", "gzip", "brotli"]}
            }
        }
    }
}
